


<!DOCTYPE html>


<html data-content_root="" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>Specialized Configurations with Docker &#8212; NVIDIA Container Toolkit</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "";
  </script>
  <!--
    this give us a css class that will be invisible only if js is disabled
  -->
  <noscript>
    <style>
      .pst-js-only { display: none !important; }

    </style>
  </noscript>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="_static/styles/theme.css?digest=8878045cc6db502f8baf" rel="stylesheet" />
<link href="_static/styles/pydata-sphinx-theme.css?digest=8878045cc6db502f8baf" rel="stylesheet" />

    <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="_static/styles/nvidia-sphinx-theme.css" />
    <link rel="stylesheet" type="text/css" href="_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="_static/design-style.b7bb847fb20b106c3d81b95245e65545.min.css" />
    <link rel="stylesheet" type="text/css" href="_static/custom.css" />
  
  <!-- So that users can add custom icons -->
  <script src="_static/scripts/fontawesome.js?digest=8878045cc6db502f8baf"></script>
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="_static/scripts/bootstrap.js?digest=8878045cc6db502f8baf" />
<link rel="preload" as="script" href="_static/scripts/pydata-sphinx-theme.js?digest=8878045cc6db502f8baf" />

    <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/mermaid-init.js"></script>
    <script src="_static/clipboard.min.js"></script>
    <script src="_static/copybutton.js"></script>
    <script src="_static/design-tabs.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'docker-specialized';</script>
    <script>
        DOCUMENTATION_OPTIONS.theme_version = '0.16.1';
        DOCUMENTATION_OPTIONS.theme_switcher_json_url = '../versions1.json';
        DOCUMENTATION_OPTIONS.theme_switcher_version_match = '1.17.4';
        DOCUMENTATION_OPTIONS.show_version_warning_banner =
            false;
        </script>
    <script src="_static/version.js"></script>
    <script src="_static/social-media.js"></script>
    <link rel="shortcut icon" href="_static/favicon.ico"/>
    <link rel="search" title="Search" href="search.html" />
    <link rel="prev" title="Support for Container Device Interface" href="cdi-support.html" />


  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="None"/>
  <meta name="docsearch:version" content="" />
    <meta name="docbuild:last-update" content="Jan 29, 2025"/>




  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <dialog id="pst-search-dialog">
    
<form class="bd-search d-flex align-items-center"
      action="search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         placeholder="Search the docs ..."
         aria-label="Search the docs ..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form>
  </dialog>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
<div class="bd-header__inner bd-page-width">
  <button class="pst-navbar-icon sidebar-toggle primary-toggle" aria-label="Site navigation">
    <span class="fa-solid fa-bars"></span>
  </button>
  
  
  <div class="col-lg-3 navbar-header-items__start">
    
      <div class="navbar-item">

  
    
  

<a class="navbar-brand logo" href="index.html">
  
  
  
  
  
    
    
      
    
    
    <img src="_static/nvidia-logo-horiz-rgb-blk-for-screen.svg" class="logo__image only-light" alt="NVIDIA Container Toolkit - Home"/>
    <img src="_static/nvidia-logo-horiz-rgb-wht-for-screen.svg" class="logo__image only-dark pst-js-only" alt="NVIDIA Container Toolkit - Home"/>
  
  
    <p class="title logo__title">NVIDIA Container Toolkit</p>
  
</a></div>
    
  </div>
  
  <div class="col-lg-9 navbar-header-items">
    
    
    <div class="navbar-header-items__end">
      
        <div class="navbar-item navbar-persistent--container">
          

<button class="btn search-button-field search-button__button pst-js-only" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
 <i class="fa-solid fa-magnifying-glass"></i>
 <span class="search-button__default-text">Search</span>
 <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
</button>
        </div>
      
      
        <div class="navbar-item">

<button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button pst-js-only" aria-label="Color mode" data-bs-title="Color mode"  data-bs-placement="bottom" data-bs-toggle="tooltip">
  <i class="theme-switch fa-solid fa-sun                fa-lg" data-mode="light" title="Light"></i>
  <i class="theme-switch fa-solid fa-moon               fa-lg" data-mode="dark"  title="Dark"></i>
  <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"  title="System Settings"></i>
</button></div>
      
    </div>
    
  </div>
  
  
    <div class="navbar-persistent--mobile">

<button class="btn search-button-field search-button__button pst-js-only" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
 <i class="fa-solid fa-magnifying-glass"></i>
 <span class="search-button__default-text">Search</span>
 <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
</button>
    </div>
  

  
    <button class="pst-navbar-icon sidebar-toggle secondary-toggle" aria-label="On this page">
      <span class="fa-solid fa-outdent"></span>
    </button>
  
</div>

    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <dialog id="pst-primary-sidebar-modal"></dialog>
      <div id="pst-primary-sidebar" class="bd-sidebar-primary bd-sidebar">
        



  
    
  

<a class="navbar-brand logo" href="index.html">
  
  
  
  
  
    
    
      
    
    
    <img src="_static/nvidia-logo-horiz-rgb-blk-for-screen.svg" class="logo__image only-light" alt="NVIDIA Container Toolkit - Home"/>
    <img src="_static/nvidia-logo-horiz-rgb-wht-for-screen.svg" class="logo__image only-dark pst-js-only" alt="NVIDIA Container Toolkit - Home"/>
  
  
    <p class="title logo__title">NVIDIA Container Toolkit</p>
  
</a>


  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
      <div class="sidebar-header-items__end">
        
          <div class="navbar-item">

<button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button pst-js-only" aria-label="Color mode" data-bs-title="Color mode"  data-bs-placement="bottom" data-bs-toggle="tooltip">
  <i class="theme-switch fa-solid fa-sun                fa-lg" data-mode="light" title="Light"></i>
  <i class="theme-switch fa-solid fa-moon               fa-lg" data-mode="dark"  title="Dark"></i>
  <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"  title="System Settings"></i>
</button></div>
        
      </div>
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">


<nav class="bd-docs-nav bd-links"
     aria-label="Table of Contents">
  <p class="bd-links__title" role="heading" aria-level="1">Table of Contents</p>
  <div class="bd-toc-item navbar-nav"><p aria-level="2" class="caption" role="heading"><span class="caption-text">NVIDIA Container Toolkit</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="index.html">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="install-guide.html">Installing the Toolkit</a></li>
<li class="toctree-l1"><a class="reference internal" href="sample-workload.html">Running a Sample Workload</a></li>
<li class="toctree-l1"><a class="reference internal" href="supported-platforms.html">Supported Platforms</a></li>
<li class="toctree-l1"><a class="reference internal" href="troubleshooting.html">Troubleshooting</a></li>
<li class="toctree-l1"><a class="reference internal" href="release-notes.html">Release Notes</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Advanced Configuration</span></p>
<ul class="current nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="arch-overview.html">Architecture Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="cdi-support.html">Container Device Interface</a></li>
<li class="toctree-l1 current active"><a class="current reference internal" href="#">Specialized Configurations with Docker</a></li>
</ul>
</div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
      <div class="sidebar-primary-item">


<div class="version-switcher__container dropdown pst-js-only">
  <button id="pst-version-switcher-button-2"
    type="button"
    class="version-switcher__button btn btn-sm dropdown-toggle"
    data-bs-toggle="dropdown"
    aria-haspopup="listbox"
    aria-controls="pst-version-switcher-list-2"
    aria-label="Version switcher list"
  >
    Choose version  <!-- this text may get changed later by javascript -->
    <span class="caret"></span>
  </button>
  <div id="pst-version-switcher-list-2"
    class="version-switcher__menu dropdown-menu list-group-flush py-0"
    role="listbox" aria-labelledby="pst-version-switcher-button-2">
    <!-- dropdown will be populated by javascript on page load -->
  </div>
</div></div>
  </div>



      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        
          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item">
<nav aria-label="Breadcrumb" class="d-print-none">
  <ul class="bd-breadcrumbs">
    <li class="breadcrumb-item breadcrumb-home">
      <a href="https://docs.nvidia.com">NVIDIA Docs Hub</a>
    </li>
    <li class="breadcrumb-item">
      <a href="https://docs.nvidia.com/datacenter/cloud-native">Cloud Native Technologies</a>
    </li>
    <li class="breadcrumb-item">
      <a href="index.html">NVIDIA Container Toolkit</a>
    </li>
    <li class="breadcrumb-item active" aria-current="page">Specialized Configurations with Docker</li>
  </ul>
</nav></div>
      
    </div>
  
  
</div>
</div>
              
              
              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section class="tex2jax_ignore mathjax_ignore" id="specialized-configurations-with-docker">
<h1>Specialized Configurations with Docker<a class="headerlink" href="#specialized-configurations-with-docker" title="Permalink to this headline">#</a></h1>
<section id="environment-variables-oci-spec">
<h2>Environment variables (OCI spec)<a class="headerlink" href="#environment-variables-oci-spec" title="Permalink to this headline">#</a></h2>
<p>Users can control the behavior of the NVIDIA container runtime using environment variables - especially for
enumerating the GPUs and the capabilities of the driver.
Each environment variable maps to an command-line argument for <code class="docutils literal notranslate"><span class="pre">nvidia-container-cli</span></code> from <a class="reference external" href="https://github.com/NVIDIA/libnvidia-container">libnvidia-container</a>.
These variables are already set in the NVIDIA provided base <a class="reference external" href="https://ngc.nvidia.com/catalog/containers/nvidia:cuda">CUDA images</a>.</p>
<section id="gpu-enumeration">
<h3>GPU Enumeration<a class="headerlink" href="#gpu-enumeration" title="Permalink to this headline">#</a></h3>
<p>GPUs can be specified to the Docker CLI using either the <code class="docutils literal notranslate"><span class="pre">--gpus</span></code> option starting with Docker <code class="docutils literal notranslate"><span class="pre">19.03</span></code> or using the environment variable
<code class="docutils literal notranslate"><span class="pre">NVIDIA_VISIBLE_DEVICES</span></code>. This variable controls which GPUs will be made accessible inside the container.</p>
<p>The possible values of the <code class="docutils literal notranslate"><span class="pre">NVIDIA_VISIBLE_DEVICES</span></code> variable are:</p>
<div class="pst-scrollable-table-container"><table class="colwidths-given table">
<colgroup>
<col style="width: 20%" />
<col style="width: 80%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Possible values</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">0,1,2,</span></code> or <code class="docutils literal notranslate"><span class="pre">GPU-fef8089b</span></code></p></td>
<td><p>a comma-separated list of GPU UUID(s) or index(es).</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">all</span></code></p></td>
<td><p>all GPUs will be accessible, this is the default value in base CUDA container images.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">none</span></code></p></td>
<td><p>no GPU will be accessible, but driver capabilities will be enabled.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">void</span></code> or <cite>empty</cite> or <cite>unset</cite></p></td>
<td><p><code class="docutils literal notranslate"><span class="pre">nvidia-container-runtime</span></code> will have the same behavior as <code class="docutils literal notranslate"><span class="pre">runc</span></code> (i.e. neither GPUs nor capabilities are exposed)</p></td>
</tr>
</tbody>
</table>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>When using the <code class="docutils literal notranslate"><span class="pre">--gpus</span></code> option to specify the GPUs, the <code class="docutils literal notranslate"><span class="pre">device</span></code> parameter should be used. This is shown in the examples below.
The format of the <code class="docutils literal notranslate"><span class="pre">device</span></code> parameter should be encapsulated within single quotes, followed by double quotes for the devices you
want enumerated to the container. For example: <code class="docutils literal notranslate"><span class="pre">'&quot;device=2,3&quot;'</span></code> will enumerate GPUs 2 and 3 to the container.</p>
<p>When using the NVIDIA_VISIBLE_DEVICES variable, you may need to set <code class="docutils literal notranslate"><span class="pre">--runtime</span></code> to <code class="docutils literal notranslate"><span class="pre">nvidia</span></code> unless already set as default.</p>
</div>
<p>Some examples of the usage are shown below:</p>
<ol class="arabic">
<li><p>Starting a GPU enabled CUDA container; using <code class="docutils literal notranslate"><span class="pre">--gpus</span></code></p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>docker run --rm --gpus all nvidia/cuda nvidia-smi
</pre></div>
</div>
</li>
<li><p>Using <code class="docutils literal notranslate"><span class="pre">NVIDIA_VISIBLE_DEVICES</span></code> and specify the nvidia runtime</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>docker run --rm --runtime<span class="o">=</span>nvidia <span class="se">\</span>
    -e <span class="nv">NVIDIA_VISIBLE_DEVICES</span><span class="o">=</span>all nvidia/cuda nvidia-smi
</pre></div>
</div>
</li>
<li><p>Start a GPU enabled container on two GPUs</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>docker run --rm --gpus <span class="m">2</span> nvidia/cuda nvidia-smi
</pre></div>
</div>
</li>
<li><p>Starting a GPU enabled container on specific GPUs</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>docker run --gpus <span class="s1">&#39;&quot;device=1,2&quot;&#39;</span> <span class="se">\</span>
    nvidia/cuda nvidia-smi --query-gpu<span class="o">=</span>uuid --format<span class="o">=</span>csv
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">uuid</span>
<span class="go">GPU-ad2367dd-a40e-6b86-6fc3-c44a2cc92c7e</span>
<span class="go">GPU-16a23983-e73e-0945-2095-cdeb50696982</span>
</pre></div>
</div>
</li>
<li><p>Alternatively, you can also use <code class="docutils literal notranslate"><span class="pre">NVIDIA_VISIBLE_DEVICES</span></code></p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>docker run --rm --runtime<span class="o">=</span>nvidia <span class="se">\</span>
    -e <span class="nv">NVIDIA_VISIBLE_DEVICES</span><span class="o">=</span><span class="m">1</span>,2 <span class="se">\</span>
    nvidia/cuda nvidia-smi --query-gpu<span class="o">=</span>uuid --format<span class="o">=</span>csv
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">uuid</span>
<span class="go">GPU-ad2367dd-a40e-6b86-6fc3-c44a2cc92c7e</span>
<span class="go">GPU-16a23983-e73e-0945-2095-cdeb50696982</span>
</pre></div>
</div>
</li>
<li><p>Query the GPU UUID using <code class="docutils literal notranslate"><span class="pre">nvidia-smi</span></code> and then specify that to the container</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>nvidia-smi -i <span class="m">3</span> --query-gpu<span class="o">=</span>uuid --format<span class="o">=</span>csv
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">uuid</span>
<span class="go">GPU-18a3e86f-4c0e-cd9f-59c3-55488c4b0c24</span>
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>docker run --gpus <span class="nv">device</span><span class="o">=</span>GPU-18a3e86f-4c0e-cd9f-59c3-55488c4b0c24 <span class="se">\</span>
     nvidia/cuda nvidia-smi
</pre></div>
</div>
</li>
</ol>
</section>
<section id="driver-capabilities">
<h3>Driver Capabilities<a class="headerlink" href="#driver-capabilities" title="Permalink to this headline">#</a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">NVIDIA_DRIVER_CAPABILITIES</span></code> controls which driver libraries/binaries will be mounted inside the container.</p>
<p>The possible values of the <code class="docutils literal notranslate"><span class="pre">NVIDIA_DRIVER_CAPABILITIES</span></code> variable are:</p>
<div class="pst-scrollable-table-container"><table class="colwidths-given table">
<colgroup>
<col style="width: 20%" />
<col style="width: 80%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Possible values</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">compute,video</span></code> or <code class="docutils literal notranslate"><span class="pre">graphics,utility</span></code></p></td>
<td><p>a comma-separated list of driver features the container needs.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">all</span></code></p></td>
<td><p>enable all available driver capabilities.</p></td>
</tr>
<tr class="row-even"><td><p><cite>empty</cite> or <cite>unset</cite></p></td>
<td><p>use default driver capability: <code class="docutils literal notranslate"><span class="pre">utility</span></code>, <code class="docutils literal notranslate"><span class="pre">compute</span></code></p></td>
</tr>
</tbody>
</table>
</div>
<p>The supported driver capabilities are provided below:</p>
<div class="pst-scrollable-table-container"><table class="colwidths-given table">
<colgroup>
<col style="width: 20%" />
<col style="width: 80%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Driver Capability</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">compute</span></code></p></td>
<td><p>required for CUDA and OpenCL applications.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">compat32</span></code></p></td>
<td><p>required for running 32-bit applications.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">graphics</span></code></p></td>
<td><p>required for running OpenGL and Vulkan applications.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">utility</span></code></p></td>
<td><p>required for using <code class="docutils literal notranslate"><span class="pre">nvidia-smi</span></code> and NVML.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">video</span></code></p></td>
<td><p>required for using the Video Codec SDK.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">display</span></code></p></td>
<td><p>required for leveraging X11 display.</p></td>
</tr>
</tbody>
</table>
</div>
<p>For example, specify the <code class="docutils literal notranslate"><span class="pre">compute</span></code> and <code class="docutils literal notranslate"><span class="pre">utility</span></code> capabilities, allowing usage of CUDA and NVML</p>
<blockquote>
<div><div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>docker run --rm --runtime<span class="o">=</span>nvidia <span class="se">\</span>
    -e <span class="nv">NVIDIA_VISIBLE_DEVICES</span><span class="o">=</span><span class="m">2</span>,3 <span class="se">\</span>
    -e <span class="nv">NVIDIA_DRIVER_CAPABILITIES</span><span class="o">=</span>compute,utility <span class="se">\</span>
    nvidia/cuda nvidia-smi
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>docker run --rm --gpus <span class="s1">&#39;all,&quot;capabilities=compute,utility&quot;&#39;</span> <span class="se">\</span>
    nvidia/cuda:11.6.2-base-ubuntu20.04 nvidia-smi
</pre></div>
</div>
</div></blockquote>
</section>
<section id="constraints">
<h3>Constraints<a class="headerlink" href="#constraints" title="Permalink to this headline">#</a></h3>
<p>The NVIDIA runtime also provides the ability to define constraints on the configurations supported by the container.</p>
<section id="nvidia-require-constraints">
<h4>NVIDIA_REQUIRE_* Constraints<a class="headerlink" href="#nvidia-require-constraints" title="Permalink to this headline">#</a></h4>
<p>This variable is a logical expression to define constraints on the software versions or GPU architectures on the container.</p>
<p>The supported constraints are provided below:</p>
<div class="pst-scrollable-table-container"><table class="colwidths-given table">
<colgroup>
<col style="width: 20%" />
<col style="width: 80%" />
</colgroup>
<thead>
<tr class="row-odd"><th class="head"><p>Constraint</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">cuda</span></code></p></td>
<td><p>constraint on the CUDA driver version.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">driver</span></code></p></td>
<td><p>constraint on the driver version.</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">arch</span></code></p></td>
<td><p>constraint on the compute architectures of the selected GPUs.</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">brand</span></code></p></td>
<td><p>constraint on the brand of the selected GPUs (e.g. GeForce, Tesla, GRID).</p></td>
</tr>
</tbody>
</table>
</div>
<p>Multiple constraints can be expressed in a single environment variable: space-separated constraints are ORed,
comma-separated constraints are ANDed.
Multiple environment variables of the form <code class="docutils literal notranslate"><span class="pre">NVIDIA_REQUIRE_*</span></code> are ANDed together.</p>
<p>For example, the following constraints can be specified to the container image for constraining the supported CUDA and
driver versions:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">NVIDIA_REQUIRE_CUDA &quot;cuda&gt;=11.0 driver&gt;=450&quot;</span>
</pre></div>
</div>
</section>
<section id="nvidia-disable-require-environment-variable">
<h4>NVIDIA_DISABLE_REQUIRE Environment Variable<a class="headerlink" href="#nvidia-disable-require-environment-variable" title="Permalink to this headline">#</a></h4>
<p>Single switch to disable all the constraints of the form <code class="docutils literal notranslate"><span class="pre">NVIDIA_REQUIRE_*</span></code>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If you are running CUDA-base images older than CUDA 11.7 (and unable to update to the new base images with updated constraints),
CUDA compatibility checks can be disabled by setting <code class="docutils literal notranslate"><span class="pre">NVIDIA_DISABLE_REQUIRE</span></code> to <code class="docutils literal notranslate"><span class="pre">true</span></code>.</p>
</div>
</section>
<section id="nvidia-require-cuda-constraint">
<h4>NVIDIA_REQUIRE_CUDA Constraint<a class="headerlink" href="#nvidia-require-cuda-constraint" title="Permalink to this headline">#</a></h4>
<p>The version of the CUDA toolkit used by the container. It is an instance of the
generic <code class="docutils literal notranslate"><span class="pre">NVIDIA_REQUIRE_*</span></code> case and it is set by official CUDA images. If the version of the NVIDIA driver
is insufficient to run this version of CUDA, the container will not be started. This variable
can be specified in the form <code class="docutils literal notranslate"><span class="pre">major.minor</span></code></p>
<p>The possible values for this variable: <code class="docutils literal notranslate"><span class="pre">cuda&gt;=7.5</span></code>, <code class="docutils literal notranslate"><span class="pre">cuda&gt;=8.0</span></code>, <code class="docutils literal notranslate"><span class="pre">cuda&gt;=9.0</span></code> and so on.</p>
</section>
</section>
<section id="dockerfiles">
<h3>Dockerfiles<a class="headerlink" href="#dockerfiles" title="Permalink to this headline">#</a></h3>
<p>Capabilities and GPU enumeration can be set in images via environment variables. If the environment variables are
set inside the Dockerfile, you don’t need to set them on the <code class="docutils literal notranslate"><span class="pre">docker</span> <span class="pre">run</span></code> command-line.</p>
<p>For instance, if you are creating your own custom CUDA container, you should use the following:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">ENV NVIDIA_VISIBLE_DEVICES all</span>
<span class="go">ENV NVIDIA_DRIVER_CAPABILITIES compute,utility</span>
</pre></div>
</div>
<p>These environment variables are already set in the NVIDIA provided CUDA images.</p>
</section>
</section>
</section>


                </article>
              
              
              
              
              
                <footer class="prev-next-footer d-print-none">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="cdi-support.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">Support for Container Device Interface</p>
      </div>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <dialog id="pst-secondary-sidebar-modal"></dialog>
                <div id="pst-secondary-sidebar" class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
<div
    id="pst-page-navigation-heading-2"
    class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> On this page
  </div>
  <nav class="bd-toc-nav page-toc" aria-labelledby="pst-page-navigation-heading-2">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#environment-variables-oci-spec">Environment variables (OCI spec)</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#gpu-enumeration">GPU Enumeration</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#driver-capabilities">Driver Capabilities</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#constraints">Constraints</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#nvidia-require-constraints">NVIDIA_REQUIRE_* Constraints</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#nvidia-disable-require-environment-variable">NVIDIA_DISABLE_REQUIRE Environment Variable</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#nvidia-require-cuda-constraint">NVIDIA_REQUIRE_CUDA Constraint</a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#dockerfiles">Dockerfiles</a></li>
</ul>
</li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
          </footer>
        
      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script defer src="_static/scripts/bootstrap.js?digest=8878045cc6db502f8baf"></script>
<script defer src="_static/scripts/pydata-sphinx-theme.js?digest=8878045cc6db502f8baf"></script>


  <footer class="bd-footer">
<div class="bd-footer__inner bd-page-width">
  
    <div class="footer-items__start">
      
        <div class="footer-item">
<a class="footer-brand logo" href="https://www.nvidia.com">
  <img src="_static/nvidia-logo-horiz-rgb-1c-blk-for-screen.svg" class="logo__image only-light" alt="NVIDIA"/>
  <img src="_static/nvidia-logo-horiz-rgb-1c-wht-for-screen.svg" class="logo__image only-dark" alt="NVIDIA"/>
</a></div>
      
        <div class="footer-item">

<div class="footer-links">
  
  
  <a class="external" href="https://www.nvidia.com/en-us/about-nvidia/privacy-policy/">Privacy Policy</a>
   | 
  
  
  
  <a class="external" href="https://www.nvidia.com/en-us/about-nvidia/privacy-center/">Manage My Privacy</a>
   | 
  
  
  
  <a class="external" href="https://www.nvidia.com/en-us/preferences/start/">Do Not Sell or Share My Data</a>
   | 
  
  
  
  <a class="external" href="https://www.nvidia.com/en-us/about-nvidia/terms-of-service/">Terms of Service</a>
   | 
  
  
  
  <a class="external" href="https://www.nvidia.com/en-us/about-nvidia/accessibility/">Accessibility</a>
   | 
  
  
  
  <a class="external" href="https://www.nvidia.com/en-us/about-nvidia/company-policies/">Corporate Policies</a>
   | 
  
  
  
  <a class="external" href="https://www.nvidia.com/en-us/product-security/">Product Security</a>
   | 
  
  
  
  <a class="external" href="https://www.nvidia.com/en-us/contact/">Contact</a>
  
  
  
</div>
</div>
      
        <div class="footer-item">



  <p class="copyright">
    
      Copyright © 2020-2025, NVIDIA Corporation.
      <br/>
    
  </p>
</div>
      
    </div>
  
  
  
</div>

  </footer>


  </body>
</html>