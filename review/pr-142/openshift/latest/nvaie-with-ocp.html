


<!DOCTYPE html>


<html data-content_root="" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>NVIDIA AI Enterprise with OpenShift &#8212; NVIDIA GPU Operator on Red Hat OpenShift Container Platform</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "";
  </script>
  <!--
    this give us a css class that will be invisible only if js is disabled
  -->
  <noscript>
    <style>
      .pst-js-only { display: none !important; }

    </style>
  </noscript>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="_static/styles/theme.css?digest=8878045cc6db502f8baf" rel="stylesheet" />
<link href="_static/styles/pydata-sphinx-theme.css?digest=8878045cc6db502f8baf" rel="stylesheet" />

    <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="_static/styles/nvidia-sphinx-theme.css" />
    <link rel="stylesheet" type="text/css" href="_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="_static/design-style.b7bb847fb20b106c3d81b95245e65545.min.css" />
    <link rel="stylesheet" type="text/css" href="_static/custom.css" />
  
  <!-- So that users can add custom icons -->
  <script src="_static/scripts/fontawesome.js?digest=8878045cc6db502f8baf"></script>
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="_static/scripts/bootstrap.js?digest=8878045cc6db502f8baf" />
<link rel="preload" as="script" href="_static/scripts/pydata-sphinx-theme.js?digest=8878045cc6db502f8baf" />

    <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/mermaid-init.js"></script>
    <script src="_static/clipboard.min.js"></script>
    <script src="_static/copybutton.js"></script>
    <script src="_static/design-tabs.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'nvaie-with-ocp';</script>
    <script>
        DOCUMENTATION_OPTIONS.theme_version = '0.16.1';
        DOCUMENTATION_OPTIONS.theme_switcher_json_url = '../versions1.json';
        DOCUMENTATION_OPTIONS.theme_switcher_version_match = '24.9.2';
        DOCUMENTATION_OPTIONS.show_version_warning_banner =
            false;
        </script>
    <script src="_static/version.js"></script>
    <script src="_static/social-media.js"></script>
    <link rel="shortcut icon" href="_static/favicon.ico"/>
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="MIG Support in OpenShift Container Platform" href="mig-ocp.html" />
    <link rel="prev" title="Installing the NVIDIA GPU Operator on OpenShift" href="install-gpu-ocp.html" />


  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="None"/>
  <meta name="docsearch:version" content="" />
    <meta name="docbuild:last-update" content="Jan 29, 2025"/>




  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <dialog id="pst-search-dialog">
    
<form class="bd-search d-flex align-items-center"
      action="search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         placeholder="Search the docs ..."
         aria-label="Search the docs ..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form>
  </dialog>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
<div class="bd-header__inner bd-page-width">
  <button class="pst-navbar-icon sidebar-toggle primary-toggle" aria-label="Site navigation">
    <span class="fa-solid fa-bars"></span>
  </button>
  
  
  <div class="col-lg-3 navbar-header-items__start">
    
      <div class="navbar-item">

  
    
  

<a class="navbar-brand logo" href="index.html">
  
  
  
  
  
    
    
      
    
    
    <img src="_static/nvidia-logo-horiz-rgb-blk-for-screen.svg" class="logo__image only-light" alt="NVIDIA GPU Operator on Red Hat OpenShift Container Platform - Home"/>
    <img src="_static/nvidia-logo-horiz-rgb-wht-for-screen.svg" class="logo__image only-dark pst-js-only" alt="NVIDIA GPU Operator on Red Hat OpenShift Container Platform - Home"/>
  
  
    <p class="title logo__title">NVIDIA GPU Operator on Red Hat OpenShift Container Platform</p>
  
</a></div>
    
  </div>
  
  <div class="col-lg-9 navbar-header-items">
    
    
    <div class="navbar-header-items__end">
      
        <div class="navbar-item navbar-persistent--container">
          

<button class="btn search-button-field search-button__button pst-js-only" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
 <i class="fa-solid fa-magnifying-glass"></i>
 <span class="search-button__default-text">Search</span>
 <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
</button>
        </div>
      
      
        <div class="navbar-item">

<button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button pst-js-only" aria-label="Color mode" data-bs-title="Color mode"  data-bs-placement="bottom" data-bs-toggle="tooltip">
  <i class="theme-switch fa-solid fa-sun                fa-lg" data-mode="light" title="Light"></i>
  <i class="theme-switch fa-solid fa-moon               fa-lg" data-mode="dark"  title="Dark"></i>
  <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"  title="System Settings"></i>
</button></div>
      
    </div>
    
  </div>
  
  
    <div class="navbar-persistent--mobile">

<button class="btn search-button-field search-button__button pst-js-only" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
 <i class="fa-solid fa-magnifying-glass"></i>
 <span class="search-button__default-text">Search</span>
 <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
</button>
    </div>
  

  
    <button class="pst-navbar-icon sidebar-toggle secondary-toggle" aria-label="On this page">
      <span class="fa-solid fa-outdent"></span>
    </button>
  
</div>

    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <dialog id="pst-primary-sidebar-modal"></dialog>
      <div id="pst-primary-sidebar" class="bd-sidebar-primary bd-sidebar">
        



  
    
  

<a class="navbar-brand logo" href="index.html">
  
  
  
  
  
    
    
      
    
    
    <img src="_static/nvidia-logo-horiz-rgb-blk-for-screen.svg" class="logo__image only-light" alt="NVIDIA GPU Operator on Red Hat OpenShift Container Platform - Home"/>
    <img src="_static/nvidia-logo-horiz-rgb-wht-for-screen.svg" class="logo__image only-dark pst-js-only" alt="NVIDIA GPU Operator on Red Hat OpenShift Container Platform - Home"/>
  
  
    <p class="title logo__title">NVIDIA GPU Operator on Red Hat OpenShift Container Platform</p>
  
</a>


  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
      <div class="sidebar-header-items__end">
        
          <div class="navbar-item">

<button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button pst-js-only" aria-label="Color mode" data-bs-title="Color mode"  data-bs-placement="bottom" data-bs-toggle="tooltip">
  <i class="theme-switch fa-solid fa-sun                fa-lg" data-mode="light" title="Light"></i>
  <i class="theme-switch fa-solid fa-moon               fa-lg" data-mode="dark"  title="Dark"></i>
  <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"  title="System Settings"></i>
</button></div>
        
      </div>
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">


<nav class="bd-docs-nav bd-links"
     aria-label="Table of Contents">
  <p class="bd-links__title" role="heading" aria-level="1">Table of Contents</p>
  <div class="bd-toc-item navbar-nav"><ul class="current nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="introduction.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="prerequisites.html">Prerequisites</a></li>
<li class="toctree-l1"><a class="reference internal" href="steps-overview.html">Installation and Upgrade Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="install-nfd.html">NFD Operator Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="install-gpu-ocp.html">GPU Operator Installation</a></li>
<li class="toctree-l1 current active"><a class="current reference internal" href="#">NVIDIA AI Enterprise with OpenShift</a></li>
<li class="toctree-l1"><a class="reference internal" href="mig-ocp.html">MIG Support in OpenShift Container Platform</a></li>
<li class="toctree-l1"><a class="reference internal" href="clean-up.html">Cleanup</a></li>
<li class="toctree-l1"><a class="reference internal" href="mirror-gpu-ocp-disconnected.html">Deploy GPU Operators in a disconnected or airgapped environment</a></li>
<li class="toctree-l1"><a class="reference internal" href="enable-gpu-monitoring-dashboard.html">Enabling the GPU Monitoring Dashboard</a></li>

<li class="toctree-l1"><a class="reference internal" href="time-slicing-gpus-in-openshift.html">Time-slicing NVIDIA GPUs in OpenShift</a></li>
<li class="toctree-l1"><a class="reference internal" href="openshift-virtualization.html">NVIDIA GPU Operator with OpenShift Virtualization</a></li>
<li class="toctree-l1"><a class="reference internal" href="gpu-operator-with-precompiled-drivers.html">Precompiled Drivers for the NVIDIA GPU Operator for RHCOS</a></li>
<li class="toctree-l1"><a class="reference internal" href="troubleshooting-gpu-ocp.html">Troubleshooting</a></li>
<li class="toctree-l1"><a class="reference internal" href="appendix-ocp.html">Appendix</a></li>
</ul>
</div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
      <div class="sidebar-primary-item">


<div class="version-switcher__container dropdown pst-js-only">
  <button id="pst-version-switcher-button-2"
    type="button"
    class="version-switcher__button btn btn-sm dropdown-toggle"
    data-bs-toggle="dropdown"
    aria-haspopup="listbox"
    aria-controls="pst-version-switcher-list-2"
    aria-label="Version switcher list"
  >
    Choose version  <!-- this text may get changed later by javascript -->
    <span class="caret"></span>
  </button>
  <div id="pst-version-switcher-list-2"
    class="version-switcher__menu dropdown-menu list-group-flush py-0"
    role="listbox" aria-labelledby="pst-version-switcher-button-2">
    <!-- dropdown will be populated by javascript on page load -->
  </div>
</div></div>
  </div>



      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        
          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item">
<nav aria-label="Breadcrumb" class="d-print-none">
  <ul class="bd-breadcrumbs">
    <li class="breadcrumb-item breadcrumb-home">
      <a href="https://docs.nvidia.com">NVIDIA Docs Hub</a>
    </li>
    <li class="breadcrumb-item">
      <a href="https://docs.nvidia.com/datacenter/cloud-native">Cloud Native Technologies</a>
    </li>
    <li class="breadcrumb-item">
      <a href="index.html">NVIDIA GPU Operator on Red Hat OpenShift Container Platform</a>
    </li>
    <li class="breadcrumb-item active" aria-current="page">NVIDIA AI Enterprise with OpenShift</li>
  </ul>
</nav></div>
      
    </div>
  
  
</div>
</div>
              
              
              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section id="nvidia-ai-enterprise-with-openshift">
<span id="nvaie-ocp"></span><h1>NVIDIA AI Enterprise with OpenShift<a class="headerlink" href="#nvidia-ai-enterprise-with-openshift" title="Permalink to this headline">#</a></h1>
<p>NVIDIA AI Enterprise is an end-to-end, cloud-native suite of AI and data analytics software, optimized, certified, and supported by NVIDIA with NVIDIA-Certified Systems. Additional information can be found at the <a class="reference external" href="https://www.nvidia.com/en-us/data-center/products/ai-enterprise-suite/#benefits">NVIDIA AI Enterprise web page</a>.</p>
<p>The following methods of installation are supported:</p>
<ul class="simple">
<li><p>OpenShift Container Platform on bare metal or VMware vSphere with GPU Passthrough</p></li>
<li><p>OpenShift Container Platform on VMware vSphere with NVIDIA vGPU</p></li>
</ul>
<section id="openshift-container-platform-bare-metal-or-vmware-vsphere-with-gpu-passthrough">
<h2>OpenShift Container Platform bare metal or VMware vSphere with GPU Passthrough<a class="headerlink" href="#openshift-container-platform-bare-metal-or-vmware-vsphere-with-gpu-passthrough" title="Permalink to this headline">#</a></h2>
<p>For OpenShift Container Platform bare metal or VMware vSphere with GPU Passthrough you do not need to make changes to the <cite>ClusterPolicy</cite>. Follow the guidance in <a class="reference internal" href="install-gpu-ocp.html#install-nvidiagpu"><span class="std std-ref">Installing the NVIDIA GPU Operator on OpenShift</span></a> to install the NVIDIA GPU Operator.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The option exists to use the vGPU driver with bare metal and VMware vSphere VMs with GPU Passthrough. In this case, follow the guidance in the section “OpenShift Container Platform on VMware vSphere with NVIDIA vGPU”.</p>
</div>
</section>
<section id="openshift-container-platform-on-vmware-vsphere-with-nvidia-vgpus">
<h2>OpenShift Container Platform on VMware vSphere with NVIDIA vGPUs<a class="headerlink" href="#openshift-container-platform-on-vmware-vsphere-with-nvidia-vgpus" title="Permalink to this headline">#</a></h2>
<section id="overview">
<h3>Overview<a class="headerlink" href="#overview" title="Permalink to this headline">#</a></h3>
<p>This section provides insights into deploying NVIDIA AI Enterprise for VMware vSphere with RedHat OpenShift Container Platform.</p>
<p>The steps involved are:</p>
<ul class="simple">
<li><p>Step 1: Install Node Feature Discovery (NFD) Operator</p></li>
<li><p>Step 2: Install NVIDIA GPU Operator</p></li>
<li><p>Step 3: Create the NGC secret</p></li>
<li><p>Step 4: Create the ConfigMap</p></li>
<li><p>Step 5: Create the Cluster Policy</p></li>
</ul>
</section>
<section id="introduction">
<h3>Introduction<a class="headerlink" href="#introduction" title="Permalink to this headline">#</a></h3>
<p>When NVIDIA AI Enterprise is running on VMware vSphere based virtualized infrastructure, a key component is NVIDIA virtual GPU. The NVIDIA AI Enterprise Host Software vSphere Installation Bundle (VIB) is installed on the VMware ESXi host server and it is responsible for communicating with the NVIDIA vGPU guest driver which is
installed on the guest VM. Guest VMs use the NVIDIA vGPUs in the same manner as a physical GPU that has been passed through by the hypervisor. In the VM itself, vGPU drivers are installed which support the different license levels that are available.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Installing the NVIDIA vGPU Host Driver VIB on the ESXi host is out of the scope of this document. See the <strong>NVIDIA AI Enterprise Deployment Guide</strong> for detailed instructions.</p>
</div>
</section>
<section id="red-hat-openshift-on-vmware-vsphere">
<h3>Red Hat OpenShift on VMware vSphere<a class="headerlink" href="#red-hat-openshift-on-vmware-vsphere" title="Permalink to this headline">#</a></h3>
<p>Follow the steps outlined in the <a class="reference external" href="https://docs.openshift.com/container-platform/latest/installing/installing_vsphere/preparing-to-install-on-vsphere.html">Installing vSphere section</a> of the RedHat OpenShift documentation installing OpenShift on vSphere.</p>
<blockquote>
<div><div class="admonition note">
<p class="admonition-title">Note</p>
<p>When using virtualized GPUs you must change the boot method of each VM that is deployed as a worker and the VM template to be EFI.
This requires powering down running worker VMs. The template must be converted to a VM, then change the boot method to EFI, then convert back
to a template.</p>
<p>Secure boot also needs to be disabled as shown:</p>
<blockquote>
<div><img alt="_images/vmx_secure_boot.png" src="_images/vmx_secure_boot.png" />
</div></blockquote>
<p>When using the <a class="reference external" href="https://docs.openshift.com/container-platform/latest/installing/installing_vsphere/installing-vsphere.html#installation-vsphere-machines_installing-vsphere">UPI install method</a>, after <strong>Step 8</strong> of the “Installing RHCOS and starting the OpenShift
Container Platform bootstrap process” change the boot method to EFI before <strong>continuing to Step 9</strong>.</p>
<p>When using the IPI method, each VM’s boot method can be changed to EFI after VM deployment.</p>
<p>In addition to the EFI boot setting, ensure that the VM has the following configuration parameters set:</p>
<p><strong>VM Settings</strong> &gt; <strong>VM options</strong> &gt; <strong>Advanced</strong> &gt; <strong>Configuration Parameters</strong> &gt; <strong>Edit Configuration</strong></p>
<p><code class="docutils literal notranslate"><span class="pre">pciPassthru.use64bitMMIO</span> <span class="pre">TRUE</span></code></p>
<p><code class="docutils literal notranslate"><span class="pre">pciPassthru.64bitMMIOSizeGB</span> <span class="pre">512</span></code></p>
<blockquote>
<div><img alt="_images/pci_passthrough.png" src="_images/pci_passthrough.png" />
</div></blockquote>
<p>To support GPUDirect RDMA ensure that the VM has the following configuration parameters set:</p>
<p><strong>VM Settings</strong> &gt; <strong>VM options</strong> &gt; <strong>Advanced</strong> &gt; <strong>Configuration Parameters</strong> &gt; <strong>Edit Configuration</strong></p>
<p><code class="docutils literal notranslate"><span class="pre">pciPassthru.allowP2P</span> <span class="pre">=</span> <span class="pre">true</span></code></p>
<p><code class="docutils literal notranslate"><span class="pre">pciPassthru.RelaxACSforP2P</span> <span class="pre">=</span> <span class="pre">true</span></code></p>
</div>
</div></blockquote>
<p>It is also recommended that you reference <a class="reference external" href="https://core.vmware.com/resource/running-red-hat-openshift-container-platform-vmware-cloud-foundation#executive-summary">Running Red Hat OpenShift Container Platform on VMware Cloud Foundation</a> documentation for deployment best practices, system configuration, and reference architecture.</p>
</section>
<section id="install-node-feature-discovery-operator">
<h3>Install Node Feature Discovery Operator<a class="headerlink" href="#install-node-feature-discovery-operator" title="Permalink to this headline">#</a></h3>
<p>Follow the guidance in <a class="reference internal" href="install-nfd.html#install-nfd"><span class="std std-ref">Installing the Node Feature Discovery Operator on OpenShift</span></a> to install the Node Feature Discovery Operator.</p>
</section>
<section id="install-nvidia-gpu-operator">
<h3>Install NVIDIA GPU Operator<a class="headerlink" href="#install-nvidia-gpu-operator" title="Permalink to this headline">#</a></h3>
<p>Follow the guidance in <a class="reference internal" href="install-gpu-ocp.html#install-nvidiagpu"><span class="std std-ref">Installing the NVIDIA GPU Operator on OpenShift</span></a> to install the NVIDIA GPU Operator.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Skip the guidance associated with creating the cluster policy instead follow the guidance in the subsequent sections.</p>
</div>
</section>
<section id="create-the-ngc-secret">
<h3>Create the NGC secret<a class="headerlink" href="#create-the-ngc-secret" title="Permalink to this headline">#</a></h3>
<p>OpenShift has a secret object type which provides a mechanism for holding sensitive information such as passwords and private source repository credentials. Next you will create a secret object for storing our NGC API key (the mechanism used to authenticate your access to the
NGC container registry).</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Before you begin, have or generate an NGC API key.
Refer to <a class="reference external" href="https://docs.nvidia.com/ngc/gpu-cloud/ngc-private-registry-user-guide/index.html#generating-api-key">Generating NGC API Keys</a>
in <em>NVIDIA NGC Private Registry Guide</em> for more information.</p>
</div>
<ol class="arabic">
<li><p>Navigate to <strong>Home</strong> &gt; <strong>Projects</strong> and ensure the <code class="docutils literal notranslate"><span class="pre">nvidia-gpu-operator</span></code> is selected.</p></li>
<li><p>In the OpenShift Container Platform web console, click <strong>Secrets</strong> from the Workloads drop down.</p></li>
<li><p>Click the <strong>Create</strong> Drop down.</p></li>
<li><p>Select Image Pull Secret.</p>
<img alt="_images/secrets.png" src="_images/secrets.png" />
</li>
<li><p>Enter the following into each field:</p>
<blockquote>
<div><ul class="simple">
<li><p><strong>Secret name</strong>: ngc-secret</p></li>
<li><p><strong>Authentication type</strong>: Image registry credentials</p></li>
<li><p><strong>Registry server address</strong>: <code class="docutils literal notranslate"><span class="pre">nvcr.io/nvidia/vgpu</span></code></p></li>
<li><p><strong>Username</strong>: <code class="docutils literal notranslate"><span class="pre">$oauthtoken</span></code></p></li>
<li><p><strong>Password</strong>: <code class="docutils literal notranslate"><span class="pre">&lt;NGC-API-KEY&gt;</span></code></p></li>
<li><p><strong>Email</strong>: <code class="docutils literal notranslate"><span class="pre">&lt;YOUR-EMAIL&gt;</span></code></p></li>
</ul>
</div></blockquote>
<img alt="_images/secrets_2.png" src="_images/secrets_2.png" />
</li>
<li><p>Click <strong>Create</strong>.</p>
<p>A pull secret is created.</p>
<img alt="_images/created_pull-secret.png" src="_images/created_pull-secret.png" />
</li>
</ol>
</section>
<section id="create-the-configmap-for-nls-token">
<h3>Create the ConfigMap for NLS Token<a class="headerlink" href="#create-the-configmap-for-nls-token" title="Permalink to this headline">#</a></h3>
<section id="prerequisites">
<h4>Prerequisites<a class="headerlink" href="#prerequisites" title="Permalink to this headline">#</a></h4>
<p>Generate and download a NLS client license token. See Section 4.6 of the <a class="reference external" href="https://docs.nvidia.com/license-system/latest/pdf/nvidia-license-system-user-guide.pdf">NVIDIA License System User Guide</a> for instructions.</p>
</section>
<section id="procedure">
<h4>Procedure<a class="headerlink" href="#procedure" title="Permalink to this headline">#</a></h4>
<ol class="arabic">
<li><p>Navigate to <strong>Home</strong> &gt; <strong>Projects</strong> and ensure the <code class="docutils literal notranslate"><span class="pre">nvidia-gpu-operator</span></code> is selected.</p></li>
<li><p>Select the <strong>Workloads</strong> Drop Down menu.</p></li>
<li><p>Select <strong>ConfigMaps</strong> and then click <strong>Create ConfigMap</strong>.</p></li>
<li><p>On the <strong>Create ConfigMap</strong> window, click <strong>YAML view</strong>.</p></li>
<li><p>Enter the details for your config map.</p>
<ol class="arabic simple">
<li><p>The <code class="docutils literal notranslate"><span class="pre">name</span></code> must be <code class="docutils literal notranslate"><span class="pre">licensing-config</span></code>.</p></li>
<li><p>Copy and paste the information for your NLS client token into the <code class="docutils literal notranslate"><span class="pre">client_configuration_token.tok</span></code> parameter.</p></li>
</ol>
<img alt="Create ConfigMap window of the OpenShift Console." src="_images/create_config_map1.png" />
</li>
<li><p>Click <strong>Create</strong>.</p></li>
</ol>
</section>
</section>
<section id="create-the-cluster-policy-instance">
<h3>Create the Cluster Policy Instance<a class="headerlink" href="#create-the-cluster-policy-instance" title="Permalink to this headline">#</a></h3>
<p>Now create the cluster policy, which is responsible for maintaining policy resources to create pods in a cluster.</p>
<ol class="arabic">
<li><p>In the OpenShift Container Platform web console, from the side menu, select <strong>Operators</strong> &gt; <strong>Installed Operators</strong>, and click <strong>NVIDIA GPU Operator</strong>.</p></li>
<li><p>Select the <strong>ClusterPolicy</strong> tab, then click <strong>Create ClusterPolicy</strong>.</p>
<p>The console assigns the default name <code class="docutils literal notranslate"><span class="pre">gpu-cluster-policy</span></code>.</p>
</li>
<li><p>Expand the drop down for <strong>NVIDIA GPU/vGPU Driver config</strong> and then <strong>licensingConfig</strong>.
In the <strong>configMapName</strong> field, enter the name of the licensing config map that you created previously, <code class="docutils literal notranslate"><span class="pre">licensing-config</span></code>.
Select the <strong>nlsEnabled</strong> checkbox.
Refer the screenshots for parameter examples and modify values accordingly.</p>
<img alt="_images/cluster_policy_1.png" src="_images/cluster_policy_1.png" />
<ul class="simple">
<li><p><strong>configMapName</strong>: licensing-config</p></li>
<li><p><strong>nlsEnabled</strong>: nlsEnabled</p></li>
<li><p><strong>enabled</strong>: enabled</p></li>
</ul>
</li>
<li><p>Expand the <strong>rdma</strong> menu and select <strong>enabled</strong> if you want to deploy GPUDirect RDMA:</p>
<img alt="_images/enable-gpu-direct-rdma.png" src="_images/enable-gpu-direct-rdma.png" />
</li>
<li><p>Scroll down to specify repository path under the <strong>NVIDIA GPU/vGPU Driver config</strong> section. See the screenshot below for parameter examples and modify values accordingly.</p>
<img alt="_images/cluster-policy-repository.png" src="_images/cluster-policy-repository.png" />
<ul class="simple">
<li><p><strong>repository</strong>: <code class="docutils literal notranslate"><span class="pre">nvcr.io/nvidia/vgpu</span></code></p></li>
</ul>
</li>
<li><p>Scroll down further to image name and specify the NVIDIA vGPU driver version under the <strong>NVIDIA GPU/vGPU Driver config</strong> section.</p>
<img alt="_images/createclusterpolicy3.png" src="_images/createclusterpolicy3.png" />
<ul class="simple">
<li><p><strong>version</strong>: 550.90.07-rhcos4.15</p></li>
<li><p><strong>image</strong>: vgpu-guest-driver-5</p></li>
</ul>
<p>The preceding version and image are examples for NVIDIA AI Enterprise 5.
Specify the vGPU driver version and image for the appropriate OpenShift Container Platform version.</p>
<ul class="simple">
<li><p>4.9 is <code class="docutils literal notranslate"><span class="pre">vgpu-guest-driver-3-0:525.60.13-rhcos4.9</span></code></p></li>
<li><p>4.10 is <code class="docutils literal notranslate"><span class="pre">vgpu-guest-driver-3-0:525.60.13-rhcos4.10</span></code></p></li>
<li><p>4.11 is <code class="docutils literal notranslate"><span class="pre">vgpu-guest-driver-3-0:525.60.13-rhcos4.11</span></code></p></li>
</ul>
</li>
<li><p>Expand the <strong>Advanced configuration</strong> menu and specify the image pull secret that you created earlier.</p>
<img alt="_images/cluster_policy_4.png" src="_images/cluster_policy_4.png" />
</li>
<li><p>Click <strong>Create</strong>.</p></li>
</ol>
<p>The GPU Operator installs all the required components to set up the NVIDIA GPUs in the OpenShift Container Platform cluster.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Wait at least 10 to 20 minutes before performing troubleshooting because installation requires several minutes to complete.</p>
</div>
<p>The status of the newly deployed ClusterPolicy <em>gpu-cluster-policy</em> for the NVIDIA GPU Operator changes to <code class="docutils literal notranslate"><span class="pre">State:ready</span></code> when the installation succeeds.</p>
<img alt="_images/cluster_policy_suceed.png" src="_images/cluster_policy_suceed.png" />
<p>Verify the ClusterPolicy installation by running the following command that displays the node names and GPU counts:</p>
<blockquote>
<div><div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>oc get nodes -o<span class="o">=</span>custom-columns<span class="o">=</span><span class="s1">&#39;Node:metadata.name,GPUs:status.capacity.nvidia\.com/gpu&#39;</span>
</pre></div>
</div>
<p><em>Example Output</em></p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">Node GPUs</span>

<span class="go">nvaie-ocp-7rfr8-master-0 &lt;none&gt;</span>

<span class="go">nvaie-ocp-7rfr8-master-1 &lt;none&gt;</span>

<span class="go">nvaie-ocp-7rfr8-master-2 &lt;none&gt;</span>

<span class="go">nvaie-ocp-7rfr8-worker-7x5km 1</span>

<span class="go">nvaie-ocp-7rfr8-worker-9jgmk &lt;none&gt;</span>

<span class="go">nvaie-ocp-7rfr8-worker-jntsp 1</span>

<span class="go">nvaie-ocp-7rfr8-worker-zkggt &lt;none&gt;</span>
</pre></div>
</div>
</div></blockquote>
</section>
<section id="verify-the-successful-installation-of-the-nvidia-gpu-operator">
<h3>Verify the successful installation of the NVIDIA GPU Operator<a class="headerlink" href="#verify-the-successful-installation-of-the-nvidia-gpu-operator" title="Permalink to this headline">#</a></h3>
<p>Perform the following steps to verify the successful installation of the <strong>NVIDIA GPU Operator</strong>.</p>
<ol class="arabic">
<li><p>In the OpenShift Container Platform web console, from the side menu, select <strong>Workloads</strong> &gt; <strong>Pods</strong>.</p></li>
<li><p>Under the <strong>Project</strong> drop down select the <strong>nvidia-gpu-operator</strong> project.</p></li>
<li><p>Verify the pods are successfully deployed.</p></li>
<li><p>Alternatively from the command line run the following command:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>oc get pods -n nvidia-gpu-operator
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">NAME                                                                  READY   STATUS      RESTARTS   AGE</span>
<span class="go">pod/gpu-feature-discovery-hlpgs                                       1/1     Running     0          91m</span>
<span class="go">pod/gpu-operator-8dc8d6648-jzhnr                                      1/1     Running     0          94m</span>
<span class="go">pod/nvidia-dcgm-exporter-ds9xd                                        1/1     Running     0          91m</span>
<span class="go">pod/nvidia-dcgm-k7tz6                                                 1/1     Running     0          91m</span>
<span class="go">pod/nvidia-device-plugin-daemonset-nqxmc                              1/1     Running     0          91m</span>
<span class="go">pod/nvidia-driver-daemonset-49.84.202202081504-0-9df9j                2/2     Running     0          91m</span>
<span class="go">pod/nvidia-node-status-exporter-7bhdk                                 1/1     Running     0          91m</span>
</pre></div>
</div>
</li>
</ol>
</section>
</section>
</section>


                </article>
              
              
              
              
              
                <footer class="prev-next-footer d-print-none">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="install-gpu-ocp.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">Installing the NVIDIA GPU Operator on OpenShift</p>
      </div>
    </a>
    <a class="right-next"
       href="mig-ocp.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">MIG Support in OpenShift Container Platform</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <dialog id="pst-secondary-sidebar-modal"></dialog>
                <div id="pst-secondary-sidebar" class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
<div
    id="pst-page-navigation-heading-2"
    class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> On this page
  </div>
  <nav class="bd-toc-nav page-toc" aria-labelledby="pst-page-navigation-heading-2">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#openshift-container-platform-bare-metal-or-vmware-vsphere-with-gpu-passthrough">OpenShift Container Platform bare metal or VMware vSphere with GPU Passthrough</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#openshift-container-platform-on-vmware-vsphere-with-nvidia-vgpus">OpenShift Container Platform on VMware vSphere with NVIDIA vGPUs</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#overview">Overview</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#introduction">Introduction</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#red-hat-openshift-on-vmware-vsphere">Red Hat OpenShift on VMware vSphere</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#install-node-feature-discovery-operator">Install Node Feature Discovery Operator</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#install-nvidia-gpu-operator">Install NVIDIA GPU Operator</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#create-the-ngc-secret">Create the NGC secret</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#create-the-configmap-for-nls-token">Create the ConfigMap for NLS Token</a><ul class="nav section-nav flex-column">
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#prerequisites">Prerequisites</a></li>
<li class="toc-h4 nav-item toc-entry"><a class="reference internal nav-link" href="#procedure">Procedure</a></li>
</ul>
</li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#create-the-cluster-policy-instance">Create the Cluster Policy Instance</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#verify-the-successful-installation-of-the-nvidia-gpu-operator">Verify the successful installation of the NVIDIA GPU Operator</a></li>
</ul>
</li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
          </footer>
        
      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script defer src="_static/scripts/bootstrap.js?digest=8878045cc6db502f8baf"></script>
<script defer src="_static/scripts/pydata-sphinx-theme.js?digest=8878045cc6db502f8baf"></script>


  <footer class="bd-footer">
<div class="bd-footer__inner bd-page-width">
  
    <div class="footer-items__start">
      
        <div class="footer-item">
<a class="footer-brand logo" href="https://www.nvidia.com">
  <img src="_static/nvidia-logo-horiz-rgb-1c-blk-for-screen.svg" class="logo__image only-light" alt="NVIDIA"/>
  <img src="_static/nvidia-logo-horiz-rgb-1c-wht-for-screen.svg" class="logo__image only-dark" alt="NVIDIA"/>
</a></div>
      
        <div class="footer-item">

<div class="footer-links">
  
  
  <a class="external" href="https://www.nvidia.com/en-us/about-nvidia/privacy-policy/">Privacy Policy</a>
   | 
  
  
  
  <a class="external" href="https://www.nvidia.com/en-us/about-nvidia/privacy-center/">Manage My Privacy</a>
   | 
  
  
  
  <a class="external" href="https://www.nvidia.com/en-us/preferences/start/">Do Not Sell or Share My Data</a>
   | 
  
  
  
  <a class="external" href="https://www.nvidia.com/en-us/about-nvidia/terms-of-service/">Terms of Service</a>
   | 
  
  
  
  <a class="external" href="https://www.nvidia.com/en-us/about-nvidia/accessibility/">Accessibility</a>
   | 
  
  
  
  <a class="external" href="https://www.nvidia.com/en-us/about-nvidia/company-policies/">Corporate Policies</a>
   | 
  
  
  
  <a class="external" href="https://www.nvidia.com/en-us/product-security/">Product Security</a>
   | 
  
  
  
  <a class="external" href="https://www.nvidia.com/en-us/contact/">Contact</a>
  
  
  
</div>
</div>
      
        <div class="footer-item">



  <p class="copyright">
    
      Copyright © 2020-2025, NVIDIA Corporation.
      <br/>
    
  </p>
</div>
      
    </div>
  
  
  
</div>

  </footer>


  </body>
</html>