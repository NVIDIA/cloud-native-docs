<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Security Considerations for NVIDIA GPU Operator &mdash; NVIDIA GPU Operator 24.9.1 documentation</title>
      <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="_static/copybutton.css" type="text/css" />
      <link rel="stylesheet" href="_static/design-style.b7bb847fb20b106c3d81b95245e65545.min.css" type="text/css" />
      <link rel="stylesheet" href="_static/omni-style.css" type="text/css" />
      <link rel="stylesheet" href="_static/api-styles.css" type="text/css" />
      <link rel="stylesheet" href="_static/custom.css" type="text/css" />
    <link rel="shortcut icon" href="_static/favicon.ico"/>
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/mermaid-init.js"></script>
        <script src="_static/clipboard.min.js"></script>
        <script src="_static/copybutton.js"></script>
        <script src="_static/design-tabs.js"></script>
        <script src="_static/version.js"></script>
        <script src="_static/social-media.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="GPU Operator with MIG" href="gpu-operator-mig.html" />
    <link rel="prev" title="NVIDIA AI Enterprise" href="install-gpu-operator-nvaie.html" />
 
<script src="https://assets.adobedtm.com/5d4962a43b79/c1061d2c5e7b/launch-191c2462b890.min.js"></script>

</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="index.html">
            <img src="_static/nvidia-logo-white.png" class="logo" alt="Logo"/>
          </a>

<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">NVIDIA GPU Operator</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="overview.html">About the Operator</a></li>
<li class="toctree-l1"><a class="reference internal" href="getting-started.html">Install</a></li>
<li class="toctree-l1"><a class="reference internal" href="upgrade.html">Upgrade</a></li>
<li class="toctree-l1"><a class="reference internal" href="uninstall.html">Uninstall</a></li>
<li class="toctree-l1"><a class="reference internal" href="platform-support.html">Platform Support</a></li>
<li class="toctree-l1"><a class="reference internal" href="release-notes.html">Release Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="troubleshooting.html">Troubleshooting</a></li>
<li class="toctree-l1"><a class="reference internal" href="gpu-driver-upgrades.html">GPU Driver Upgrades</a></li>
<li class="toctree-l1"><a class="reference internal" href="install-gpu-operator-vgpu.html">Using NVIDIA vGPU</a></li>
<li class="toctree-l1"><a class="reference internal" href="install-gpu-operator-nvaie.html">NVIDIA AI Enterprise</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Security Considerations</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Advanced Operator Configuration</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="gpu-operator-mig.html">Multi-Instance GPU</a></li>
<li class="toctree-l1"><a class="reference internal" href="gpu-sharing.html">Time-Slicing GPUs</a></li>
<li class="toctree-l1"><a class="reference internal" href="gpu-operator-rdma.html">GPUDirect RDMA and GPUDirect Storage</a></li>
<li class="toctree-l1"><a class="reference internal" href="install-gpu-operator-outdated-kernels.html">Outdated Kernels</a></li>
<li class="toctree-l1"><a class="reference internal" href="custom-driver-params.html">Custom GPU Driver Parameters</a></li>
<li class="toctree-l1"><a class="reference internal" href="precompiled-drivers.html">Precompiled Driver Containers</a></li>
<li class="toctree-l1"><a class="reference internal" href="gpu-driver-configuration.html">GPU Driver CRD</a></li>
<li class="toctree-l1"><a class="reference internal" href="cdi.html">Container Device Interface Support</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Sandboxed Workloads</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="gpu-operator-kubevirt.html">KubeVirt</a></li>
<li class="toctree-l1"><a class="reference internal" href="gpu-operator-kata.html">Kata Containers</a></li>
<li class="toctree-l1"><a class="reference internal" href="gpu-operator-confidential-containers.html">Confidential Containers and Kata</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Specialized Networks</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="install-gpu-operator-proxy.html">HTTP Proxy</a></li>
<li class="toctree-l1"><a class="reference internal" href="install-gpu-operator-air-gapped.html">Air-Gapped Network</a></li>
<li class="toctree-l1"><a class="reference internal" href="install-gpu-operator-service-mesh.html">Service Mesh</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">CSP configurations</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="amazon-eks.html">Amazon EKS</a></li>
<li class="toctree-l1"><a class="reference internal" href="microsoft-aks.html">Azure AKS</a></li>
<li class="toctree-l1"><a class="reference internal" href="google-gke.html">Google GKE</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">NVIDIA GPU Operator</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
<div> <!-- class="omni-version-warning" -->
  <p class="omni-version-warning-content"> Upgrade to NVIDIA Container Toolkit v1.16.2 or higher, or GPU Operator v24.6.2 or higher to install a critical security update.<br/>
  Refer to <a href="https://nvidia.custhelp.com/app/answers/detail/a_id/5582">Security Bulletin: NVIDIA Container Toolkit - September 2024</a> for more information.</p>
</div>

<li>
    <a href="https://docs.nvidia.com">NVIDIA Docs Hub</a>
    <i class="fa fa-chevron-right" aria-hidden="true"></i>
</li>
<li>
    <a href="https://docs.nvidia.com/datacenter/cloud-native/">NVIDIA Cloud Native Technologies</a>
    <i class="fa fa-chevron-right" aria-hidden="true"></i>
</li>
<li>Security Considerations for NVIDIA GPU Operator</li>
      <li class="wy-breadcrumbs-aside">
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="security-considerations-for-nvidia-gpu-operator">
<h1>Security Considerations for NVIDIA GPU Operator<a class="headerlink" href="#security-considerations-for-nvidia-gpu-operator" title="Permalink to this headline"></a></h1>
<div class="contents local topic" id="contents">
<ul class="simple">
<li><p><a class="reference internal" href="#preventing-unprivileged-access-to-gpus" id="id1">Preventing Unprivileged Access to GPUs</a></p></li>
<li><p><a class="reference internal" href="#pod-security-context-of-the-operator-and-operands" id="id2">Pod Security Context of the Operator and Operands</a></p></li>
</ul>
</div>
<section id="preventing-unprivileged-access-to-gpus">
<h2>Preventing Unprivileged Access to GPUs<a class="headerlink" href="#preventing-unprivileged-access-to-gpus" title="Permalink to this headline"></a></h2>
<p>A default installation of NVIDIA Container Toolkit and NVIDIA Kubernetes Device Plugin permits unprivileged containers to bypass the Kubernetes Device Plugin API and gain access to GPUs on a node by setting the <code class="docutils literal notranslate"><span class="pre">NVIDIA_VISIBLE_DEVICES</span></code> environment variable.
This behavior means that an unprivileged container can gain access to GPUs without specifying resource limits or gain access to more GPUs than were specified through resource limits.</p>
<p>However, there are valid circumstances to grant containers access to all GPUs on the system without going through the NVIDIA Kubernetes Device Plugin and interfering with Kubernetes accounting for allocatable resources.
Examples of these pods are the device plugin itself and and container that performs monitoring of GPU devices, such as NVIDIA DCGM Exporter.
However, these pods differ from typical workloads because they run software that is critical to the overall Kubernetes infrastructure and should be considered privileged.
Keep in mind that privileged containers always have access to all GPUs on a node.</p>
<p>You can configure the toolkit and device plugin to prevent unprivileged containers from gaining access to GPUs through the <code class="docutils literal notranslate"><span class="pre">NVIDIA_VISIBLE_DEVICES</span></code> environment variable.
The strategy for the toolkit and device plugin are as follows:</p>
<ul>
<li><p>The toolkit ignores <code class="docutils literal notranslate"><span class="pre">NVIDIA_VISIBLE_DEVICES</span></code>.</p></li>
<li><p>The device plugin produces a list of GPU devices as volume mounts, according to resource requests, and the toolkit accepts this list exclusively.</p>
<p>An assumption is made that cluster administrators do not allow host volume mounts for unprivileged containers.</p>
</li>
</ul>
<p>The combination of configuring the toolkit and device plugin, and not allowing host volume mounts for unprivileged containers prevents those containers from setting up the GPU device list themselves.</p>
<p>To configure these operands during Operator installation or upgrade, create a <code class="docutils literal notranslate"><span class="pre">values.yaml</span></code> file with contents like the following example:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">toolkit</span><span class="p">:</span><span class="w"></span>
<span class="w">  </span><span class="nt">env</span><span class="p">:</span><span class="w"></span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ACCEPT_NVIDIA_VISIBLE_DEVICES_ENVVAR_WHEN_UNPRIVILEGED</span><span class="w"></span>
<span class="w">    </span><span class="nt">value</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;false&quot;</span><span class="w"></span>
<span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">ACCEPT_NVIDIA_VISIBLE_DEVICES_AS_VOLUME_MOUNTS</span><span class="w"></span>
<span class="w">    </span><span class="nt">value</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;true&quot;</span><span class="w"></span>
<span class="w w-Error"> </span><span class="nt">devicePlugin</span><span class="p">:</span><span class="w"></span>
<span class="w">   </span><span class="nt">env</span><span class="p">:</span><span class="w"></span>
<span class="w">   </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">DEVICE_LIST_STRATEGY</span><span class="w"></span>
<span class="w">     </span><span class="nt">value</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">volume-mounts</span><span class="w"></span>
</pre></div>
</div>
<p>The following comparison shows how setting <code class="docutils literal notranslate"><span class="pre">NVIDIA_VISIBLE_DEVICES</span></code> to <code class="docutils literal notranslate"><span class="pre">all</span></code> grants access to more GPUs than the resource request
in the default configuration and that access is limited after reconfiguration.
Any image can set <code class="docutils literal notranslate"><span class="pre">NVIDIA_VISIBLE_DEVICES</span></code> to <code class="docutils literal notranslate"><span class="pre">all</span></code>–the base CUDA image in the example does–with the same result as explicitly setting the variable on the command line.</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 50%" />
<col style="width: 50%" />
</colgroup>
<tbody>
<tr class="row-odd"><td colspan="2"><div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>kubectl run --rm -it cuda <span class="se">\</span>
    --image<span class="o">=</span>nvcr.io/nvidia/cuda:12.5.1-base-ubuntu20.04 <span class="se">\</span>
    --restart<span class="o">=</span>Never --override-type<span class="o">=</span>strategic <span class="se">\</span>
    --overrides<span class="o">=</span><span class="s1">&#39;{&quot;spec&quot;:{&quot;containers&quot;:[{&quot;name&quot;:&quot;cuda&quot;,&quot;resources&quot;:{&quot;limits&quot;:{&quot;nvidia.com/gpu&quot;:1}}}]}}&#39;</span> <span class="se">\</span>
    --env<span class="o">=</span><span class="s2">&quot;NVIDIA_VISIBLE_DEVICES=all&quot;</span> -- nvidia-smi -L
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><p>Default Configuration</p></td>
<td><p>Limit Unprivileged</p></td>
</tr>
<tr class="row-odd"><td><div class="highlight-output notranslate"><div class="highlight"><pre><span></span><span class="go">GPU 0: Tesla T4 (UUID: GPU-6cfb8bf0-b556-d216-90a4-0827b23b1348)</span>
<span class="go">GPU 1: Tesla T4 (UUID: GPU-90ac9649-3c3b-4d9f-e3ab-95c8043e7d48)</span>
</pre></div>
</div>
</td>
<td><div class="highlight-output notranslate"><div class="highlight"><pre><span></span><span class="go">GPU 0: Tesla T4 (UUID: GPU-6cfb8bf0-b556-d216-90a4-0827b23b1348)</span>
</pre></div>
</div>
</td>
</tr>
</tbody>
</table>
<p>The following comparison shows how specifying a resource request of <code class="docutils literal notranslate"><span class="pre">nvidia.com/gpu:</span> <span class="pre">0</span></code> grants access to GPUs
in the default configuration and that access is limited after reconfiguration.</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 50%" />
<col style="width: 50%" />
</colgroup>
<tbody>
<tr class="row-odd"><td colspan="2"><div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>kubectl run --rm -it cuda <span class="se">\</span>
    --image<span class="o">=</span>nvcr.io/nvidia/cuda:12.5.1-base-ubuntu20.04 <span class="se">\</span>
    --restart<span class="o">=</span>Never --override-type<span class="o">=</span>strategic <span class="se">\</span>
    --overrides<span class="o">=</span><span class="s1">&#39;{&quot;spec&quot;:{&quot;containers&quot;:[{&quot;name&quot;:&quot;cuda&quot;,&quot;resources&quot;:{&quot;limits&quot;:{&quot;nvidia.com/gpu&quot;:0}}}]}}&#39;</span> <span class="se">\</span>
    -- nvidia-smi -L
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><p>Default Configuration</p></td>
<td><p>Limit Unprivileged</p></td>
</tr>
<tr class="row-odd"><td><div class="highlight-output notranslate"><div class="highlight"><pre><span></span><span class="go">GPU 0: Tesla T4 (UUID: GPU-dfb3f7ba-f6c2-3dd1-e621-46208932a9a7)</span>
<span class="go">GPU 1: Tesla T4 (UUID: GPU-1d37ef30-0861-de64-a06d-73257e247a0d)</span>
</pre></div>
</div>
</td>
<td><div class="highlight-output notranslate"><div class="highlight"><pre><span></span><span class="go">pod default/cuda terminated (StartError)</span>
<span class="go">failed to create containerd task: failed to create shim task: OCI runtime create failed: runc</span>
<span class="go">create failed: unable to start container process: exec: &quot;nvidia-smi&quot;: executable file not found in $PATH: unknown</span>
</pre></div>
</div>
</td>
</tr>
</tbody>
</table>
<p>The following comparison shows that privileged containers have access to all GPUs regardless of environment variables, resource requests,
or device plugin and toolkit configuration.</p>
<table class="docutils align-default">
<colgroup>
<col style="width: 50%" />
<col style="width: 50%" />
</colgroup>
<tbody>
<tr class="row-odd"><td colspan="2"><div class="highlight-text notranslate"><div class="highlight"><pre><span></span>$ kubectl run --rm -it cuda \
    --image=nvcr.io/nvidia/cuda:12.5.1-base-ubuntu20.04 \
    --restart=Never --override-type=strategic \
    --overrides=&#39;{
       &quot;spec&quot;:{
          &quot;containers&quot;: [{
            &quot;name&quot;:&quot;cuda&quot;,
            &quot;env&quot;: [{
                &quot;name&quot;: &quot;NVIDIA_VISIBLE_DEVICES&quot;,
                &quot;value&quot;: &quot;0,1&quot;
            }],
            &quot;securityContext&quot;: {
                &quot;capabilities&quot;: {
                    &quot;add&quot;: [&quot;SYS_ADMIN&quot;]
                }
            }
          }]
       }
    }&#39; \
    -- nvidia-smi -L
</pre></div>
</div>
</td>
</tr>
<tr class="row-even"><td><p>Default Configuration</p></td>
<td><p>Limit Unprivileged</p></td>
</tr>
<tr class="row-odd"><td><div class="highlight-output notranslate"><div class="highlight"><pre><span></span><span class="go">GPU 0: Tesla T4 (UUID: GPU-6cfb8bf0-b556-d216-90a4-0827b23b1348)</span>
<span class="go">GPU 1: Tesla T4 (UUID: GPU-90ac9649-3c3b-4d9f-e3ab-95c8043e7d48)</span>
</pre></div>
</div>
</td>
<td><div class="highlight-output notranslate"><div class="highlight"><pre><span></span><span class="go">GPU 0: Tesla T4 (UUID: GPU-6cfb8bf0-b556-d216-90a4-0827b23b1348)</span>
<span class="go">GPU 1: Tesla T4 (UUID: GPU-90ac9649-3c3b-4d9f-e3ab-95c8043e7d48)</span>
</pre></div>
</div>
</td>
</tr>
</tbody>
</table>
</section>
<section id="pod-security-context-of-the-operator-and-operands">
<h2>Pod Security Context of the Operator and Operands<a class="headerlink" href="#pod-security-context-of-the-operator-and-operands" title="Permalink to this headline"></a></h2>
<p>Several of the NVIDIA GPU Operator operands, such as the driver containers and container toolkit,
require the following elevated privileges:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">privileged:</span> <span class="pre">true</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">hostPID:</span> <span class="pre">true</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">hostIPC:</span> <span class="pre">true</span></code></p></li>
</ul>
<p>The elevated privileges are required for the following reasons:</p>
<ul class="simple">
<li><p>Access to the host file system and hardware devices, such as NVIDIA GPUs.</p></li>
<li><p>Restart system services such as containerd.</p></li>
<li><p>Permit users to list all GPU clients using the <code class="docutils literal notranslate"><span class="pre">nvidia-smi</span></code> utility.</p></li>
</ul>
<p>Only the Kubernetes cluster administrator needs to access or manage the Operator namespace.
As a best practice, establish proper security policies and prevent any other users from accessing the Operator namespace.</p>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="install-gpu-operator-nvaie.html" class="btn btn-neutral float-left" title="NVIDIA AI Enterprise" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="gpu-operator-mig.html" class="btn btn-neutral float-right" title="GPU Operator with MIG" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
<img src="_static/NVIDIA-LogoBlack.svg" class="only-light"/>
<img src="_static/NVIDIA-LogoWhite.svg" class="only-dark"/>
<p class="notices">
<a href="https://www.nvidia.com/en-us/about-nvidia/privacy-policy/" target="_blank">Privacy Policy</a>
|
<a href="https://www.nvidia.com/en-us/about-nvidia/privacy-center/" target="_blank">Manage My Privacy</a>
|
<a href="https://www.nvidia.com/en-us/preferences/start/" target="_blank">Do Not Sell or Share My Data</a>
|
<a href="https://www.nvidia.com/en-us/about-nvidia/terms-of-service/" target="_blank">Terms of Service</a>
|
<a href="https://www.nvidia.com/en-us/about-nvidia/accessibility/" target="_blank">Accessibility</a>
|
<a href="https://www.nvidia.com/en-us/about-nvidia/company-policies/" target="_blank">Corporate Policies</a>
|
<a href="https://www.nvidia.com/en-us/product-security/" target="_blank">Product Security</a>
|
<a href="https://www.nvidia.com/en-us/contact/" target="_blank">Contact</a>
</p>
<p>
  Copyright &#169; 2020-2024, NVIDIA Corporation.
</p>

    <p>
      <span class="lastupdated">Last updated on Dec 12, 2024.
      </span></p>
<script type="text/javascript">if (typeof _satellite !== "undefined"){ _satellite.pageBottom();}</script>

  </div>

   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>
    <!-- Theme Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-WBRZJBCJEW"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'G-WBRZJBCJEW', {
          'anonymize_ip': false,
      });
    </script> 

</body>
</html>