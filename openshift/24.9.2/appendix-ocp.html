


<!DOCTYPE html>


<html data-content_root="" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>Appendix &#8212; NVIDIA GPU Operator on Red Hat OpenShift Container Platform</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "";
  </script>
  <!--
    this give us a css class that will be invisible only if js is disabled
  -->
  <noscript>
    <style>
      .pst-js-only { display: none !important; }

    </style>
  </noscript>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="_static/styles/theme.css?digest=8878045cc6db502f8baf" rel="stylesheet" />
<link href="_static/styles/pydata-sphinx-theme.css?digest=8878045cc6db502f8baf" rel="stylesheet" />

    <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="_static/styles/nvidia-sphinx-theme.css" />
    <link rel="stylesheet" type="text/css" href="_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="_static/design-style.b7bb847fb20b106c3d81b95245e65545.min.css" />
    <link rel="stylesheet" type="text/css" href="_static/custom.css" />
  
  <!-- So that users can add custom icons -->
  <script src="_static/scripts/fontawesome.js?digest=8878045cc6db502f8baf"></script>
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="_static/scripts/bootstrap.js?digest=8878045cc6db502f8baf" />
<link rel="preload" as="script" href="_static/scripts/pydata-sphinx-theme.js?digest=8878045cc6db502f8baf" />

    <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/mermaid-init.js"></script>
    <script src="_static/clipboard.min.js"></script>
    <script src="_static/copybutton.js"></script>
    <script src="_static/design-tabs.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'appendix-ocp';</script>
    <script>
        DOCUMENTATION_OPTIONS.theme_version = '0.16.1';
        DOCUMENTATION_OPTIONS.theme_switcher_json_url = '../versions1.json';
        DOCUMENTATION_OPTIONS.theme_switcher_version_match = '24.9.2';
        DOCUMENTATION_OPTIONS.show_version_warning_banner =
            false;
        </script>
    <script src="_static/version.js"></script>
    <script src="_static/social-media.js"></script>
    <link rel="shortcut icon" href="_static/favicon.ico"/>
    <link rel="search" title="Search" href="search.html" />
    <link rel="prev" title="Troubleshooting" href="troubleshooting-gpu-ocp.html" />


  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="None"/>
  <meta name="docsearch:version" content="" />
    <meta name="docbuild:last-update" content="Jan 29, 2025"/>




  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <dialog id="pst-search-dialog">
    
<form class="bd-search d-flex align-items-center"
      action="search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         placeholder="Search the docs ..."
         aria-label="Search the docs ..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form>
  </dialog>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
<div class="bd-header__inner bd-page-width">
  <button class="pst-navbar-icon sidebar-toggle primary-toggle" aria-label="Site navigation">
    <span class="fa-solid fa-bars"></span>
  </button>
  
  
  <div class="col-lg-3 navbar-header-items__start">
    
      <div class="navbar-item">

  
    
  

<a class="navbar-brand logo" href="index.html">
  
  
  
  
  
    
    
      
    
    
    <img src="_static/nvidia-logo-horiz-rgb-blk-for-screen.svg" class="logo__image only-light" alt="NVIDIA GPU Operator on Red Hat OpenShift Container Platform - Home"/>
    <img src="_static/nvidia-logo-horiz-rgb-wht-for-screen.svg" class="logo__image only-dark pst-js-only" alt="NVIDIA GPU Operator on Red Hat OpenShift Container Platform - Home"/>
  
  
    <p class="title logo__title">NVIDIA GPU Operator on Red Hat OpenShift Container Platform</p>
  
</a></div>
    
  </div>
  
  <div class="col-lg-9 navbar-header-items">
    
    
    <div class="navbar-header-items__end">
      
        <div class="navbar-item navbar-persistent--container">
          

<button class="btn search-button-field search-button__button pst-js-only" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
 <i class="fa-solid fa-magnifying-glass"></i>
 <span class="search-button__default-text">Search</span>
 <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
</button>
        </div>
      
      
        <div class="navbar-item">

<button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button pst-js-only" aria-label="Color mode" data-bs-title="Color mode"  data-bs-placement="bottom" data-bs-toggle="tooltip">
  <i class="theme-switch fa-solid fa-sun                fa-lg" data-mode="light" title="Light"></i>
  <i class="theme-switch fa-solid fa-moon               fa-lg" data-mode="dark"  title="Dark"></i>
  <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"  title="System Settings"></i>
</button></div>
      
    </div>
    
  </div>
  
  
    <div class="navbar-persistent--mobile">

<button class="btn search-button-field search-button__button pst-js-only" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
 <i class="fa-solid fa-magnifying-glass"></i>
 <span class="search-button__default-text">Search</span>
 <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
</button>
    </div>
  

  
    <button class="pst-navbar-icon sidebar-toggle secondary-toggle" aria-label="On this page">
      <span class="fa-solid fa-outdent"></span>
    </button>
  
</div>

    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <dialog id="pst-primary-sidebar-modal"></dialog>
      <div id="pst-primary-sidebar" class="bd-sidebar-primary bd-sidebar">
        



  
    
  

<a class="navbar-brand logo" href="index.html">
  
  
  
  
  
    
    
      
    
    
    <img src="_static/nvidia-logo-horiz-rgb-blk-for-screen.svg" class="logo__image only-light" alt="NVIDIA GPU Operator on Red Hat OpenShift Container Platform - Home"/>
    <img src="_static/nvidia-logo-horiz-rgb-wht-for-screen.svg" class="logo__image only-dark pst-js-only" alt="NVIDIA GPU Operator on Red Hat OpenShift Container Platform - Home"/>
  
  
    <p class="title logo__title">NVIDIA GPU Operator on Red Hat OpenShift Container Platform</p>
  
</a>


  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
      <div class="sidebar-header-items__end">
        
          <div class="navbar-item">

<button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button pst-js-only" aria-label="Color mode" data-bs-title="Color mode"  data-bs-placement="bottom" data-bs-toggle="tooltip">
  <i class="theme-switch fa-solid fa-sun                fa-lg" data-mode="light" title="Light"></i>
  <i class="theme-switch fa-solid fa-moon               fa-lg" data-mode="dark"  title="Dark"></i>
  <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"  title="System Settings"></i>
</button></div>
        
      </div>
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">


<nav class="bd-docs-nav bd-links"
     aria-label="Table of Contents">
  <p class="bd-links__title" role="heading" aria-level="1">Table of Contents</p>
  <div class="bd-toc-item navbar-nav"><ul class="current nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="introduction.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="prerequisites.html">Prerequisites</a></li>
<li class="toctree-l1"><a class="reference internal" href="steps-overview.html">Installation and Upgrade Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="install-nfd.html">NFD Operator Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="install-gpu-ocp.html">GPU Operator Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="nvaie-with-ocp.html">NVIDIA AI Enterprise with OpenShift</a></li>
<li class="toctree-l1"><a class="reference internal" href="mig-ocp.html">MIG Support in OpenShift Container Platform</a></li>
<li class="toctree-l1"><a class="reference internal" href="clean-up.html">Cleanup</a></li>
<li class="toctree-l1"><a class="reference internal" href="mirror-gpu-ocp-disconnected.html">Deploy GPU Operators in a disconnected or airgapped environment</a></li>
<li class="toctree-l1"><a class="reference internal" href="enable-gpu-monitoring-dashboard.html">Enabling the GPU Monitoring Dashboard</a></li>

<li class="toctree-l1"><a class="reference internal" href="time-slicing-gpus-in-openshift.html">Time-slicing NVIDIA GPUs in OpenShift</a></li>
<li class="toctree-l1"><a class="reference internal" href="openshift-virtualization.html">NVIDIA GPU Operator with OpenShift Virtualization</a></li>
<li class="toctree-l1"><a class="reference internal" href="gpu-operator-with-precompiled-drivers.html">Precompiled Drivers for the NVIDIA GPU Operator for RHCOS</a></li>
<li class="toctree-l1"><a class="reference internal" href="troubleshooting-gpu-ocp.html">Troubleshooting</a></li>
<li class="toctree-l1 current active"><a class="current reference internal" href="#">Appendix</a></li>
</ul>
</div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
      <div class="sidebar-primary-item">


<div class="version-switcher__container dropdown pst-js-only">
  <button id="pst-version-switcher-button-2"
    type="button"
    class="version-switcher__button btn btn-sm dropdown-toggle"
    data-bs-toggle="dropdown"
    aria-haspopup="listbox"
    aria-controls="pst-version-switcher-list-2"
    aria-label="Version switcher list"
  >
    Choose version  <!-- this text may get changed later by javascript -->
    <span class="caret"></span>
  </button>
  <div id="pst-version-switcher-list-2"
    class="version-switcher__menu dropdown-menu list-group-flush py-0"
    role="listbox" aria-labelledby="pst-version-switcher-button-2">
    <!-- dropdown will be populated by javascript on page load -->
  </div>
</div></div>
  </div>



      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        
          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item">
<nav aria-label="Breadcrumb" class="d-print-none">
  <ul class="bd-breadcrumbs">
    <li class="breadcrumb-item breadcrumb-home">
      <a href="https://docs.nvidia.com">NVIDIA Docs Hub</a>
    </li>
    <li class="breadcrumb-item">
      <a href="https://docs.nvidia.com/datacenter/cloud-native">Cloud Native Technologies</a>
    </li>
    <li class="breadcrumb-item">
      <a href="index.html">NVIDIA GPU Operator on Red Hat OpenShift Container Platform</a>
    </li>
    <li class="breadcrumb-item active" aria-current="page">Appendix</li>
  </ul>
</nav></div>
      
    </div>
  
  
</div>
</div>
              
              
              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section id="appendix">
<span id="ocp-appendix"></span><h1>Appendix<a class="headerlink" href="#appendix" title="Permalink to this headline">#</a></h1>
<section id="enabling-a-cluster-wide-entitlement">
<span id="cluster-entitlement"></span><h2>Enabling a Cluster-wide entitlement<a class="headerlink" href="#enabling-a-cluster-wide-entitlement" title="Permalink to this headline">#</a></h2>
<section id="introduction">
<h3>Introduction<a class="headerlink" href="#introduction" title="Permalink to this headline">#</a></h3>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The Driver Toolkit, which enables entitlement-free deployments of the GPU Operator, is available for certain z-streams on OpenShift
4.8 and all z-streams on OpenShift 4.9. However, some Driver Toolkit images are broken, so we recommend maintaining entitlements for
all OpenShift versions prior to 4.9.9. See <a class="reference internal" href="steps-overview.html#broken-dtk"><span class="std std-ref">broken driver toolkit</span></a> for more information.</p>
</div>
<p>The <strong>NVIDIA GPU Operator</strong> deploys several pods used to manage and enable GPUs for use in the OpenShift Container Platform.
Some of these Pods require packages that are not available by default in the Universal Base Image (UBI) that OpenShift Container
Platform uses. To make packages available to the NVIDIA GPU driver container, you must enable cluster-wide entitled container builds in OpenShift.</p>
<p>At a high level, enabling a cluster-wide entitlement involves three steps:</p>
<ol class="arabic simple">
<li><p>Download Red Hat OpenShift Container Platform subscription certificates from the <a class="reference external" href="https://access.redhat.com/">Red Hat Customer Portal</a> (access requires login credentials).</p></li>
<li><p>Create a <code class="docutils literal notranslate"><span class="pre">MachineConfig</span></code> that enables the subscription manager and provides a valid subscription certificate. Wait for the <code class="docutils literal notranslate"><span class="pre">MachineConfigOperator</span></code> to reboot the node and finish applying the <code class="docutils literal notranslate"><span class="pre">MachineConfig</span></code>.</p></li>
<li><p>Validate that cluster-wide entitlement is working properly.</p></li>
</ol>
<p>These instructions assume you downloaded an entitlement encoded in base64 from the <a class="reference external" href="https://access.redhat.com/">Red Hat Customer Portal</a> or extracted it from an existing node.</p>
<p>Creating entitled containers requires that you assign machine configuration that has a valid Red Hat entitlement certificate to your worker nodes. This step is necessary because Red Hat Enterprise Linux (RHEL) CoreOS nodes are not yet automatically entitled.</p>
</section>
<section id="obtaining-an-entitlement-certificate">
<span id="obtain-entitlement"></span><h3>Obtaining an entitlement certificate<a class="headerlink" href="#obtaining-an-entitlement-certificate" title="Permalink to this headline">#</a></h3>
<p>Follow the guidance below to edit obtain the entitlement certificate.</p>
<ol class="arabic">
<li><p>Navigate to the <a class="reference external" href="https://access.redhat.com/management/systems/">Red Hat Customer Portal systems management page</a> and click <strong>New</strong>.</p>
<img alt="_images/cluster_entitlement_1.png" src="_images/cluster_entitlement_1.png" />
</li>
<li><p>Select <strong>Hypervisor</strong> and populate the <strong>Name</strong> field with the text <strong>OpenShift-Entitlement</strong>.</p>
<img alt="_images/entitlement_hypervisor.png" src="_images/entitlement_hypervisor.png" />
</li>
<li><p>Click <strong>CREATE</strong>.</p></li>
<li><p>Select the <strong>Subscriptions</strong> tab and click <strong>Attach Subscriptions</strong>.</p>
<img alt="_images/cluster_entitlement_3.png" src="_images/cluster_entitlement_3.png" />
</li>
<li><p>Search for <strong>Red Hat Developer Subscription</strong> [content here may vary according to accounts], select one of them and click <strong>Attach Subscriptions</strong>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The <strong>Red Hat Developer Subscription</strong> is choosen here purely for illustrating this example. Choose an appropriate subscription relevant for your your needs.</p>
</div>
</li>
<li><p>Click <strong>Download Certificates</strong>.</p></li>
</ol>
<img alt="_images/cluster_entitlement_5.png" src="_images/cluster_entitlement_5.png" />
<ol class="arabic">
<li><p>Download and extract the file.</p></li>
<li><p>Extract the key <em>&lt;key&gt;.pem</em> and test it with this command:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>curl -E &lt;key&gt;.pem -Sfs -k https://cdn.redhat.com/content/dist/rhel8/8/x86_64/baseos/os/repodata/repomd.xml <span class="p">|</span> head -3
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>With a valid key, <cite>curl</cite> downloads the repository entrypoint and shows its <cite>head</cite> shown in the example below.</p>
<p>With an invalid key, <cite>curl</cite> download is refused by the Red Hat package mirror.</p>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span>
<span class="go">&lt;repomd xmlns=&quot;http://linux.duke.edu/metadata/repo&quot; xmlns:rpm=&quot;http://linux.duke.edu/metadata/rpm&quot;&gt;</span>
<span class="go">&lt;revision&gt;1631130504&lt;/revision&gt;</span>
</pre></div>
</div>
</li>
</ol>
</section>
<section id="add-a-cluster-wide-entitlement">
<h3>Add a cluster-wide entitlement<a class="headerlink" href="#add-a-cluster-wide-entitlement" title="Permalink to this headline">#</a></h3>
<p>Use the following procedure to add a cluster-wide entitlement:</p>
<ol class="arabic">
<li><p>Create a local appropriately named directory. Change to this directory.</p></li>
<li><p>Download the <a class="reference download internal" download="" href="_downloads/d52ed445b8c6334b765945fae02a867a/0003-cluster-wide-machineconfigs.yaml.template"><code class="xref download docutils literal notranslate"><span class="pre">machine</span> <span class="pre">config</span> <span class="pre">YAML</span> <span class="pre">template</span></code></a> for cluster-wide entitlements on OpenShift Container Platform. Save the downloaded file <code class="docutils literal notranslate"><span class="pre">0003-cluster-wide-machineconfigs.yaml.template</span></code> to the directory created in step 1.</p></li>
<li><p>Copy the selected <code class="docutils literal notranslate"><span class="pre">pem</span></code> file from your entitlement certificate to a local file named <code class="docutils literal notranslate"><span class="pre">nvidia.pem</span></code>:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>cp &lt;path/to/pem/file&gt;/&lt;certificate-file-name&gt;.pem nvidia.pem
</pre></div>
</div>
</li>
<li><p>Generate the MachineConfig file by appending the entitlement certificate:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>sed -i -f - <span class="m">0003</span>-cluster-wide-machineconfigs.yaml.template &lt;&lt; EOF
<span class="go">s/BASE64_ENCODED_PEM_FILE/$(base64 -w0 nvidia.pem)/g</span>
<span class="go">EOF</span>
</pre></div>
</div>
</li>
<li><p>Apply the machine config to the OpenShift cluster:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>oc apply -f <span class="m">0003</span>-cluster-wide-machineconfigs.yaml.template
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This step triggers an update driven by the OpenShift Machine Config Operator and initiates a restart on all worker nodes one by one.</p>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">machineconfig.machineconfiguration.openshift.io/50-rhsm-conf created</span>
<span class="go">machineconfig.machineconfiguration.openshift.io/50-entitlement-pem created</span>
<span class="go">machineconfig.machineconfiguration.openshift.io/50-entitlement-key-pem created</span>
</pre></div>
</div>
</li>
<li><p>Check the <code class="docutils literal notranslate"><span class="pre">machineconfig</span></code>:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>oc get machineconfig <span class="p">|</span> grep entitlement
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">50-entitlement-key-pem                             2.2.0             45s</span>
<span class="go">50-entitlement-pem                                 2.2.0             45s</span>
</pre></div>
</div>
</li>
<li><p>Monitor the <code class="docutils literal notranslate"><span class="pre">MachineConfigPool</span></code> object:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>oc get mcp/worker
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">NAME     CONFIG                                             UPDATED   UPDATING   DEGRADED   MACHINECOUNT   READYMACHINECOUNT   UPDATEDMACHINECOUNT   DEGRADEDMACHINECOUNT   AGE</span>
<span class="go">worker   rendered-worker-5f1eaf24c760fb389d47d3c37ef41c29   True      False      False      2              2                   2                     0                      7h15m</span>
</pre></div>
</div>
<p>Here you can see that the MCP is updated, not updating or degraded, so all the <code class="docutils literal notranslate"><span class="pre">MachineConfig</span></code> resources have been successfully applied to the nodes and you can proceed to validate the cluster.</p>
</li>
</ol>
</section>
<section id="validate-the-cluster-wide-entitlement">
<h3>Validate the cluster-wide entitlement<a class="headerlink" href="#validate-the-cluster-wide-entitlement" title="Permalink to this headline">#</a></h3>
<p>Validate the cluster-wide entitlement with a test pod that queries a Red Hat subscription repo for the kernel-devel package.</p>
<ol class="arabic">
<li><p>Create a test pod:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>cat &lt;&lt; EOF &gt;&gt; mypod.yaml

<span class="go">apiVersion: v1</span>
<span class="go">kind: Pod</span>
<span class="go">metadata:</span>
<span class="go"> name: cluster-entitled-build-pod</span>
<span class="go"> namespace: default</span>
<span class="go">spec:</span>
<span class="go"> containers:</span>
<span class="go">  - name: cluster-entitled-build</span>
<span class="go">    image: registry.access.redhat.com/ubi8:latest</span>
<span class="go">    command: [ &quot;/bin/sh&quot;, &quot;-c&quot;, &quot;dnf search kernel-devel --showduplicates&quot; ]</span>
<span class="go"> restartPolicy: Never</span>
<span class="go">EOF</span>
</pre></div>
</div>
</li>
<li><p>Apply the test pod:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>oc create -f mypod.yaml
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">pod/cluster-entitled-build-pod created</span>
</pre></div>
</div>
</li>
<li><p>Verify the test pod is created:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>oc get pods -n default
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">NAME                         READY   STATUS    RESTARTS   AGE</span>
<span class="go">cluster-entitled-build-pod   1/1     Completed 0          64m</span>
</pre></div>
</div>
</li>
<li><p>Validate that the pod can locate the necessary kernel-devel packages:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">$ </span>oc logs cluster-entitled-build-pod -n default
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">Updating Subscription Management repositories.</span>
<span class="go">Unable to read consumer identity</span>
<span class="go">Subscription Manager is operating in container mode.</span>
<span class="go">Red Hat Enterprise Linux 8 for x86_64 - AppStre  15 MB/s |  14 MB     00:00</span>
<span class="go">Red Hat Enterprise Linux 8 for x86_64 - BaseOS   15 MB/s |  13 MB     00:00</span>
<span class="go">Red Hat Universal Base Image 8 (RPMs) - BaseOS  493 kB/s | 760 kB     00:01</span>
<span class="go">Red Hat Universal Base Image 8 (RPMs) - AppStre 2.0 MB/s | 3.1 MB     00:01</span>
<span class="go">Red Hat Universal Base Image 8 (RPMs) - CodeRea  12 kB/s | 9.1 kB     00:00</span>
<span class="go">====================== Name Exactly Matched: kernel-devel ======================</span>
<span class="go">kernel-devel-4.18.0-80.1.2.el8_0.x86_64 : Development package for building</span>
<span class="go">                                  : kernel modules to match the kernel</span>
<span class="go">kernel-devel-4.18.0-80.el8.x86_64 : Development package for building kernel</span>
<span class="go">                            : modules to match the kernel</span>
<span class="go">kernel-devel-4.18.0-80.4.2.el8_0.x86_64 : Development package for building</span>
<span class="go">                                  : kernel modules to match the kernel</span>
<span class="go">kernel-devel-4.18.0-80.7.1.el8_0.x86_64 : Development package for building</span>
<span class="go">                                  : kernel modules to match the kernel</span>
<span class="go">kernel-devel-4.18.0-80.11.1.el8_0.x86_64 : Development package for building</span>
<span class="go">                                   : kernel modules to match the kernel</span>
<span class="go">kernel-devel-4.18.0-147.el8.x86_64 : Development package for building kernel</span>
<span class="go">                             : modules to match the kernel</span>
<span class="go">kernel-devel-4.18.0-80.11.2.el8_0.x86_64 : Development package for building</span>
<span class="go">                                   : kernel modules to match the kernel</span>
<span class="go">kernel-devel-4.18.0-80.7.2.el8_0.x86_64 : Development package for building</span>
<span class="go">                                  : kernel modules to match the kernel</span>
<span class="go">kernel-devel-4.18.0-147.0.3.el8_1.x86_64 : Development package for building</span>
<span class="go">                                   : kernel modules to match the kernel</span>
<span class="go">kernel-devel-4.18.0-147.0.2.el8_1.x86_64 : Development package for building</span>
<span class="go">                                   : kernel modules to match the kernel</span>
<span class="go">kernel-devel-4.18.0-147.3.1.el8_1.x86_64 : Development package for building</span>
<span class="go">                                   : kernel modules to match the kernel</span>
</pre></div>
</div>
</li>
</ol>
<p>Any Pod based on RHEL can now run entitled builds.</p>
</section>
</section>
</section>


                </article>
              
              
              
              
              
                <footer class="prev-next-footer d-print-none">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="troubleshooting-gpu-ocp.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">Troubleshooting</p>
      </div>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <dialog id="pst-secondary-sidebar-modal"></dialog>
                <div id="pst-secondary-sidebar" class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
<div
    id="pst-page-navigation-heading-2"
    class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> On this page
  </div>
  <nav class="bd-toc-nav page-toc" aria-labelledby="pst-page-navigation-heading-2">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#enabling-a-cluster-wide-entitlement">Enabling a Cluster-wide entitlement</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#introduction">Introduction</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#obtaining-an-entitlement-certificate">Obtaining an entitlement certificate</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#add-a-cluster-wide-entitlement">Add a cluster-wide entitlement</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#validate-the-cluster-wide-entitlement">Validate the cluster-wide entitlement</a></li>
</ul>
</li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
          </footer>
        
      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script defer src="_static/scripts/bootstrap.js?digest=8878045cc6db502f8baf"></script>
<script defer src="_static/scripts/pydata-sphinx-theme.js?digest=8878045cc6db502f8baf"></script>


  <footer class="bd-footer">
<div class="bd-footer__inner bd-page-width">
  
    <div class="footer-items__start">
      
        <div class="footer-item">
<a class="footer-brand logo" href="https://www.nvidia.com">
  <img src="_static/nvidia-logo-horiz-rgb-1c-blk-for-screen.svg" class="logo__image only-light" alt="NVIDIA"/>
  <img src="_static/nvidia-logo-horiz-rgb-1c-wht-for-screen.svg" class="logo__image only-dark" alt="NVIDIA"/>
</a></div>
      
        <div class="footer-item">

<div class="footer-links">
  
  
  <a class="external" href="https://www.nvidia.com/en-us/about-nvidia/privacy-policy/">Privacy Policy</a>
   | 
  
  
  
  <a class="external" href="https://www.nvidia.com/en-us/about-nvidia/privacy-center/">Manage My Privacy</a>
   | 
  
  
  
  <a class="external" href="https://www.nvidia.com/en-us/preferences/start/">Do Not Sell or Share My Data</a>
   | 
  
  
  
  <a class="external" href="https://www.nvidia.com/en-us/about-nvidia/terms-of-service/">Terms of Service</a>
   | 
  
  
  
  <a class="external" href="https://www.nvidia.com/en-us/about-nvidia/accessibility/">Accessibility</a>
   | 
  
  
  
  <a class="external" href="https://www.nvidia.com/en-us/about-nvidia/company-policies/">Corporate Policies</a>
   | 
  
  
  
  <a class="external" href="https://www.nvidia.com/en-us/product-security/">Product Security</a>
   | 
  
  
  
  <a class="external" href="https://www.nvidia.com/en-us/contact/">Contact</a>
  
  
  
</div>
</div>
      
        <div class="footer-item">



  <p class="copyright">
    
      Copyright © 2020-2025, NVIDIA Corporation.
      <br/>
    
  </p>
</div>
      
    </div>
  
  
  
</div>

  </footer>


  </body>
</html>